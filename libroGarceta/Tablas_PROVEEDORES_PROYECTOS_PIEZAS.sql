-- ******************************************************
-- ****** PROYECTOS, PIEZAS, PROVEEDORES, GESTION
-- *******************************************************

DROP TABLE GESTION CASCADE CONSTRAINTS;
DROP TABLE PROVEEDORES CASCADE CONSTRAINTS;
DROP TABLE PIEZAS CASCADE CONSTRAINTS;
DROP TABLE PROYECTOS CASCADE CONSTRAINTS;

-- *********************** TABLA PIEZAS
CREATE TABLE PIEZAS(
CODIGO VARCHAR2(6), 
NOMBRE VARCHAR2(20) NOT NULL, 
PRECIO NUMBER(7,2) NOT NULL, 
DESCRIPCION VARCHAR2(100),
constraint pkpiezas PRIMARY KEY(CODIGO)
);

INSERT INTO PIEZAS VALUES('P0001','CAUDALIMETRO', 400.32, 'PARA LOS VEHICULOS DIESEL');
INSERT INTO PIEZAS VALUES('P0002','CORREA DENTADA', 40, 'FACIL DE COLOCAR');
INSERT INTO PIEZAS VALUES('P0004','RODILLO TENSOR', 31, 'MONTAJE Y DESMONTAJE FACIL');
INSERT INTO PIEZAS VALUES('L0001','LONA PARA PISCINA', 78,'DE COLOR VERDE PARA TODO TIPO DE PISCINAS');
INSERT INTO PIEZAS VALUES('L0002','HORMIGONERA', 600.75, 'PARA --OVER TODO TIPO DE CEMENTO');

INSERT INTO PIEZAS VALUES('P0005','FRENOS DE DISCO', 470.32, 'DE ACERO INOXIDABLE, DE CARBONO Y DE CERÁMICA');
INSERT INTO PIEZAS VALUES('P0006','FRENOS DE TAMBOR', 500, 'REVISAR LÍQUIDO DE FRENO');
INSERT INTO PIEZAS VALUES('P0007','ENGANCHE', 50, 'CON RÓTULA, HERRAJE Y PERNOS');
INSERT INTO PIEZAS VALUES('L0003','BACA-PORTABICIS', 230,'SUJECIÓN CON PUNTOS DE ANCLAJE');
INSERT INTO PIEZAS VALUES('L0004','RETROVISOR', 50, 'ADAPTABLE A VARIAS MARCAS');

INSERT INTO PIEZAS VALUES('L0005','EMBRAGUE', 450, 'ADAPTABLE A VARIAS MARCAS');
INSERT INTO PIEZAS VALUES('L0006','ELEVALUNAS', 350, 'ADAPTABLE A VARIAS MARCAS');





-- *********************** TABLA PROVEEDORES
CREATE TABLE PROVEEDORES(
 CODIGO VARCHAR2(6), 
 NOMBRE VARCHAR2(20) NOT NULL,
 APELLIDOS VARCHAR2(30) NOT NULL, 
 DIRECCION VARCHAR2(40) NOT NULL,
 constraint pkPROVEEDORES PRIMARY KEY(CODIGO)
);


INSERT INTO PROVEEDORES VALUES('PR0001','JUAN', 'VALDES', 'POLIGONO LA CAFETERA 55, GUADALAJARA');
INSERT INTO PROVEEDORES VALUES('PR0002','GREGORIA', 'JIMENEZ', 'LA HERRERIA 27, TOLEDO');
INSERT INTO PROVEEDORES VALUES('PR0003','MANUEL', 'PIMENTEL', 'SAN FRANCISCO 18, SEVILLA');
INSERT INTO PROVEEDORES VALUES('PR0004','ALICIA', 'GARCÍA', 'LOS ALFARES 5, TOLEDO');

-- *********************** TABLA PROYECTOS
CREATE TABLE PROYECTOS(
CODIGO VARCHAR2(6), 
NOMBRE VARCHAR2(40) NOT NULL,
CIUDAD VARCHAR2(40),
 constraint pkPROYECTOS PRIMARY KEY(CODIGO)
);

INSERT INTO PROYECTOS VALUES('CR0001','CASA RURAL EL ALTOZANO', 'BERROCALEJO');
INSERT INTO PROYECTOS VALUES('VH0011','VEHICULO PROTOTIPO', 'CACERES');
INSERT INTO PROYECTOS VALUES('ED0001','EDIFICIO VIVIENDAS', 'TOLEDO');


-- *********************** TABLA GESTION

CREATE TABLE GESTION(
CODPROVEEDOR VARCHAR2(6) , 
CODPIEZA VARCHAR2(6) NOT NULL, 
CODPROYECTO VARCHAR2(6) NOT NULL , 
CANTIDAD FLOAT,
constraint pkGESTION PRIMARY KEY (CODPROVEEDOR, CODPIEZA, CODPROYECTO), 
CONSTRAINT FKproveedor FOREIGN KEY  (CODPROVEEDOR) REFERENCES PROVEEDORES(CODIGO), 
CONSTRAINT FKpieza FOREIGN KEY  (CODPIEZA) REFERENCES PIEZAS(CODIGO), 
CONSTRAINT FKproyecto FOREIGN KEY  (CODPROYECTO) REFERENCES PROYECTOS(CODIGO) 
);



INSERT INTO GESTION VALUES('PR0001', 'L0002','ED0001', 10);
INSERT INTO GESTION VALUES('PR0001', 'L0003','ED0001', 10);
INSERT INTO GESTION VALUES('PR0001', 'L0004','ED0001', 10);
INSERT INTO GESTION VALUES('PR0001', 'P0007','ED0001', 10);

INSERT INTO GESTION VALUES('PR0001', 'P0001','VH0011', 24);
INSERT INTO GESTION VALUES('PR0001', 'P0002','VH0011', 25);
INSERT INTO GESTION VALUES('PR0001', 'P0007','VH0011', 10);


INSERT INTO GESTION VALUES('PR0002', 'L0002','CR0001', 3);
INSERT INTO GESTION VALUES('PR0002', 'L0001','CR0001', 15);
INSERT INTO GESTION VALUES('PR0002', 'P0004','CR0001', 15);
INSERT INTO GESTION VALUES('PR0002', 'P0005','CR0001', 3);
INSERT INTO GESTION VALUES('PR0002', 'P0006','CR0001', 10);
INSERT INTO GESTION VALUES('PR0002', 'P0007','CR0001', 10);

INSERT INTO GESTION VALUES('PR0002', 'P0005','ED0001', 3);
INSERT INTO GESTION VALUES('PR0002', 'P0006','ED0001', 2);
INSERT INTO GESTION VALUES('PR0002', 'P0007','ED0001', 20);

INSERT INTO GESTION VALUES('PR0002', 'P0007','VH0011', 12);
INSERT INTO GESTION VALUES('PR0002', 'L0002','VH0011', 12);

INSERT INTO GESTION VALUES('PR0003', 'L0003','CR0001', 3);
INSERT INTO GESTION VALUES('PR0003', 'L0004','CR0001', 5);
INSERT INTO GESTION VALUES('PR0003', 'P0004','CR0001',5);
INSERT INTO GESTION VALUES('PR0003', 'P0005','CR0001', 3);
INSERT INTO GESTION VALUES('PR0003', 'P0007','CR0001', 10);

INSERT INTO GESTION VALUES('PR0004', 'L0002','CR0001', 3);
INSERT INTO GESTION VALUES('PR0004', 'L0001','CR0001', 15);
INSERT INTO GESTION VALUES('PR0004', 'P0004','CR0001', 15);
INSERT INTO GESTION VALUES('PR0004', 'P0005','CR0001', 3);
INSERT INTO GESTION VALUES('PR0004', 'P0006','CR0001', 10);


INSERT INTO GESTION VALUES('PR0004', 'P0001','ED0001', 5);
INSERT INTO GESTION VALUES('PR0004', 'P0002','ED0001', 5);
INSERT INTO GESTION VALUES('PR0004', 'P0007','ED0001', 5);


INSERT INTO GESTION VALUES('PR0004', 'P0001','VH0011', 5);
INSERT INTO GESTION VALUES('PR0004', 'P0002','VH0011', 5);
INSERT INTO GESTION VALUES('PR0004', 'P0004','VH0011', 5);
INSERT INTO GESTION VALUES('PR0004', 'P0005','VH0011', 5);
INSERT INTO GESTION VALUES('PR0004', 'P0006','VH0011', 5);
INSERT INTO GESTION VALUES('PR0004', 'P0007','VH0011', 5);



COMMIT;

